import day20 as d


def test_parse():
    input_s = """\
..#.#

#.
#.
"""
    algo, img = d.parse(input_s)
    assert algo == [False, False, True, False, True]
    assert img == {(0, 0): True, (1, 0): False, (0, 1): True, (1, 1): False}


def test_combine_pixels():
    grid = """\
#..
...
...
"""
    img = d.parse_img(grid)
    assert d.combine_pixels((1, 1), img) == 256

    grid = """\
#..#.
#....
##..#
..#..
..###
"""
    img = d.parse_img(grid)
    assert d.combine_pixels((2, 2), img) == 34


def test_part_one():
    input_s = """\
..#.#..#####.#.#.#.###.##.....###.##.#..###.####..#####..#....#..#..##..###..######.###...####..#..#####..##..#.#####...##.#.#..#.##..#.#......#.###.######.###.####...#.##.##..#..#..#####.....#.#....###..#.##......#.....#..#..#..##..#...##.######.####.####.#.#...#.......#..#.#.#...####.##.#......#..#...##.#.##..#...##.#.##..###.#......#.#.......#.#.#.####.###.##...#.....####.#..#..#.##.#....##..#.####....##...##..#...#......#.#.......#.......##..####..#...#.#.#...##..#.#..###..#####........#..####......#..#

#..#.
#....
##..#
..#..
..###
"""
    algo, img = d.parse(input_s)
    res = d.part_one(algo, img)
    assert res == 35
